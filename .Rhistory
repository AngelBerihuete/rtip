packrat::status()
library(rtip)
library(rtip)
devtools::document()
install.packages("devtools")
library(devtools)
library(rtip)
devtools::document()
devtools::install_github("klutometis/roxygen")
install.packages("roxygen2")
devtools::document()
load("~/Repositories/laeken2/data/ppp_rates.rda")
ls()
devtools::use_data(ppp.rates, internal = TRUE)
library(rtip)
?arpr
devtools::document()
?arpr
?eusilc2
packrat::snapshot(prompt = FALSE)
packrat::status()
packrat::set_opts(vcs.ignore.src = TRUE)
ls()
library(rtip)
library(rtip)
setwd("~/Repositories/rtip/data-raw")
load(eusilc.Rdata)
eusilc2 <- eusilc[!duplicated(eusilc$db030),]
ks
ls
dir()
load("eusilc.RData")
eusilc2 <- eusilc[!duplicated(eusilc$db030),]
eusilc2 <- data.frame(
DB010 = rep(2006, length(eusilc2$db040)),
DB020 = as.factor(rep("AT", length(eusilc2$db040))),
DB040 = eusilc2$db040,
DB090 = eusilc2$db090,
HX040 = eusilc2$hsize,
HX050 = eusilc2$eqSS,
HX090 = eusilc2$eqIncome)
str(eusilc2)
library(rtip)
?eusilc2
library(rtip)
?eusilc2
?eusilc2
library(rtip)
?eusilc2
library(rtip)
?eusilc2
library(rtip)
?eusilc2
library(ggplot2)
library(gplot2)
install.packages("ggplot2")
library(ggplot2)
?diamonds
library(rtip)
?eusilc2
?filterEUSILC
?filtereusilc
?ggplot
library(rtip)
?filterEUSILC
library(rtip)
?LCS2012
data("LCS2012")
ls()
str(LCS2012)
str(eusilc2)
library(rtip)
?eusilc2
?example
library(rtip)
?loadLCS
library(rtip)
?ggplot
dir()
devtools::build()
devtools::build()
devtools::build()
library(rtip)
?rtip
??rtip
library(rtip)
library(rtip)
library(rtip)
?OmegaGL
library(rtip)
?OmegaGL
?testTIP
library(rtip)
library(rtip)
library(rtip)
?OmegaGL
?testTIP
library(rtip)
library(rtip)
q()
library(rtip)
??rtip
?rtip
?arpr
?eusilc2
library(rtip)
?eusilc2
data("eusilc2")
str(eusilc2)
library(rtip)
?filterEUSILC
data("LCS2012")
?LCS2012
library(rtip)
?lc
library(rtip)
?lc
library(rtip)
?lc
library(rtip)
?lc
library(rtip)
?lc
setwd("~/Repositories/rtip/data-raw")
LCS2014 <- loadLCS(esudb14d.csv, esudb14h.csv)
LCS2014 <- loadLCS("esudb14d.csv", "esudb14h.csv")
str(LCS2014)
?set
setupDataset()
?setupDataset
?quantile
ls()
dir()
setwd("~/Repositories/rtip/data")
save(LCS2014, file = "LCS2014.RData")
str(LCS2014)
setwd("~/Repositories/rtip/data-raw")
loadLCS <- function(lcs_d_file, lcs_h_file){
dataset1 <- read.table(lcs_d_file, header=TRUE, sep= ",")
dataset2 <- read.table(lcs_h_file, header=TRUE, sep= ",")
sub.dataset1 <- subset(dataset1, select = c("DB010", "DB020", "DB030",
"DB040", "DB090"))
sub.dataset2 <- subset(dataset2, select = c("HB010", "HB020", "HB030",
"HY020", "HX040", "HX240",
"vhRentaa"))
sub.dataset2$HX050 <- sub.dataset2$HX240
sub.dataset2$HX090 <- sub.dataset2$vhRentaa/sub.dataset2$HX240
check1 <- identical(sub.dataset1$DB010, sub.dataset2$HB010) # check if you've the same identification for homes
check2 <- identical(sub.dataset1$DB030, sub.dataset2$HB030) # check if you've the same identification for homes
if(!check1){
stop('Different years!')
}else if (!check2){
stop('You do not have the same identification for homes')
}else{
dataset <- cbind(sub.dataset1, sub.dataset2)
dataset <- subset(dataset, select = c("DB010", "DB020", "DB040", "DB090",
"HX040", "HX050", "HX090"))
}
}
LCS2014 <- loadLCS("esudb14d.csv", "esudb14h.csv")
str(LCS2014)
setwd("~/Repositories/rtip/data-raw")
save(LCS2014, file = "LCS2014.RData")
setwd("~/Repositories/rtip/data")
save(LCS2014, file = "LCS2014.RData")
library(rtip)
library(rtip)
library(rtip)
library(rtip)
?loadEUSILC
?rmpg
library(rtip)
?OmegaGL
library(rtip)
?testTIP
library(rtip)
?testTIP
library(rtip)
?testTIP
library(rtip)
setwd("~/Dropbox/Research/Proyecto/Datasets")
eusil06 <- loadEUSILC("UDB_c06D.csv", "UDB_c06H.csv")
str(eusil06)
eusilc06 <- eusil06
dataSP06 <- setupDataset(eusilc06)
str(dataSP06)
gini(dataSP06)
ls()
?constrOptim
install.packages("plyr")
install.packages("reshape2")
library(ggplot2)
install.packages("mvtnorm")
install.packages("boot")
install.packages("plyr")
library(plyr)
packrat::get_opts()
install.packages("plyr", lib="/home/angel/Repositories/rtip/packrat/lib-R")
library("plyr", lib.loc="~/Repositories/rtip/packrat/lib-R")
remove.packages("plyr", lib="")
install.packages("ggplot2", lib="/home/angel/Repositories/rtip/packrat/lib-R")
library("ggplot2", lib.loc="~/Repositories/rtip/packrat/lib-R")
library(rtip)
packrat::snapshot(prompt = FALSE)
library(rtip)
?testTIP
library(rtip)
?testTIP
library(rtip)
?testTIP
library(rtip)
sessionInfo()
library(rtip)
library(devtools)
install.packages("roxygen2")
library(rtip)
library(rtip)
?loadLCS
data("eusilc2")
ls()
?setupDataset
data(eusilc2)
ATdataset <- setupDataset(eusilc2, country = "AT")
str(ATdataset)
dataset <- ATdataset
samp = 10
select <- (1:samp)/samp
dataset1 <- dataset[order(dataset[,'ipuc']), ]
dataset1$Acum <- cumsum(dataset1$wHX040)
dataset1$Acum.P_i <- dataset1$Acum/dataset1$Acum[length(dataset1$Acum)]
number.individuals <- dataset1$Acum[length(dataset1$Acum)]
p_i <- (1:samp)/samp
np_i <- floor(p_i*number.individuals)
sigma <- mat.or.vec(samp, samp)
vector.gamma_i <- c()
quantile.i <- c()
for(i in 1:samp){
pos.i <- which(dataset1$Acum.P_i>=p_i[i])[1]
quantile.i[i] <- dataset1$ipuc[pos.i]
if(pos.i == 1){
gamma_i <- vector.gamma_i[i] <- dataset1$ipuc[pos.i]
lambda.i <- 0
}else{
gamma_i <- sum(dataset1$ipuc[1:(pos.i-1)]*dataset1$wHX040[1:(pos.i-1)]) +
dataset1$ipuc[pos.i]*(np_i[i]-dataset1$Acum[pos.i-1])
gamma_i <- vector.gamma_i[i] <- gamma_i/np_i[i]
lambda.i <- sum((dataset1$ipuc[1:(pos.i-1)]-gamma_i)^2*dataset1$wHX040[1:(pos.i-1)])+
(dataset1$ipuc[pos.i]-gamma_i)^2*(np_i[i]-dataset1$Acum[pos.i-1])
lambda.i <- lambda.i/np_i[i]
}
for(j in i:samp){
pos.j <- which(dataset1$Acum.P_i>=p_i[j])[1]
if(pos.j == 1){
gamma.j <- dataset1$ipuc[pos.j]
}else{
gamma.j <- sum(dataset1$ipuc[1:(pos.j-1)]*dataset1$wHX040[1:(pos.j-1)]) +
dataset1$ipuc[pos.j]*(np_i[j]-dataset1$Acum[pos.j-1])
gamma.j <- gamma.j/np_i[j]
}
sigma[i,j] <- p_i[i]*(lambda.i+(1-p_i[j])*(dataset1$ipuc[pos.i]-gamma_i)*(dataset1$ipuc[pos.j]-gamma.j)+(dataset1$ipuc[pos.i]-gamma_i)*(gamma.j-gamma_i))
}
}
j
gamma.j
gamma_i
vector.gamma_i
length(vector.gamma_i)
p_i
J <- matrix(NA, nrow = samp, ncol = (samp+1))
J
J <- matrix(0, nrow = samp, ncol = (samp+1))
J
J <- diag(rep(gamma.j, samp))
J
end.col <- -p_i*vector.gamma_i/gamma.j^2
end.col
J <- cbind(J, end.col)
J
dim(OmegaGL())
sigma <- sigma + t(sigma)
diag(sigma) <- diag(sigma)/2
Omega.gl <- sigma/number.individuals
dim(Omega.gl)
Omega.gl <- J %*% Omega.gl %*% t(J)
dim(J)
dim(Omega.gl)
dim(sigma)
p_i
vector.gamma_i
J <- diag(rep(1/gamma.j, (samp-1)))
J
gamma.j
miuc(dataset)
p_i[-1]
p_i[-samp]
end.col <- -p_i[-samp]*vector.gamma_i[-samp]/gamma.j^2
end.col
length(end.col)
J <- cbind(J, end.col)
J
Omega.gl <- J %*% sigma %*% t(J)
Omega.gl
Omega.gl <- Omega.gl/number.individuals
Omega.gl
gl.curve <- vector.gamma_i*p_i/gamma.j
gl.curve
length(gl.curve)
?lc
library(rtip)
library(rtip)
session_info()
library(rtip)
library(rtip)
library(rtip)
?OmegaGL
?OmegaGL
library(rtip)
?OmegaGL
library(rtip)
setwd("~/Dropbox/Research/Proyecto/Paper2/rtip")
ls
setwd("~/Dropbox/Research/Proyecto/Paper2/rtip")
setwd("~/GitRepos/rtip/R")
?constrOptim
setwd("~/Dropbox/Research/Proyecto/Paper2/rtip")
?lc
library(rtip)
?lc
lc1 <- lc(ATdataset1, plot = FALSE)
?testGL
data(eusilc2)
ATdataset1 <- setupDataset(eusilc2, country = "AT", region = "Burgenland")
ATdataset2 <- setupDataset(eusilc2, country = "AT", region = "Carinthia")
lc1 <- lc(ATdataset1, plot = FALSE)
lc2 <- lc(ATdataset2, plot = FALSE)
str(lc1)
str(lc2)
ggplot(lc1, aes(x.lg, y.lg)) + geom_line(color = "red") +
geom_line(dataset = lc2, aes(x.lg, y.lg))
ggplot(lc1, aes(x.lg, y.lg)) + geom_line(color = "red") +
geom_line(lc2, aes(x.lg, y.lg))
ggplot(data = lc1, aes(x.lg, y.lg)) + geom_line(color = "red") +
geom_line(data = lc2, aes(x.lg, y.lg))
?lc
testGL(ATdataset1, ATdataset2, generalized = FALSE)
testGL(ATdataset2, ATdataset1, generalized = FALSE)
setwd("~/ownCloud/UCA/Nautica/Practicas/pract4")
load("~/ownCloud/UCA/Nautica/Practicas/pract4/basedatos.Rda")
ls()
str(datos)
library(rtip)
